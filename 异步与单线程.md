### **单线程与异步**

------

#### 单线程

##### **1.js 单线程概念：*

 js 在同一时间只能做一件事

##### **2.原因**

避免 DOM 渲染冲突，因为 js 可以修改 DOM，如果同时执行两段 js ，就可能导致 DOM 渲染出错。

##### **3.单线程解决方案**

异步

------

#### 异步

##### **1.异步存在的问题**

1. 代码执行顺序和书写顺序不一致，容易导致错误
2. callback 中不容易实现模块化，容易陷入回调地狱，即一层回调嵌一层回调

**2.任务队列**

包含同步队列(主进程、运行栈)和异步队列

##### 3.异步实现机制

  事件轮询

##### **4.事件轮询 event loop**

1. 浏览器在主进程中从上到下执行语句，同步语句直接执行。

2. 异步任务，放到异步队列中去。setTimeout 0 函数，直接放入异步队列。如果有定时时间，到了定时时间再放入异步队列。如果是 ajax 请求，在收到响应后再放入异步队列。

3. 当主进程中的任务执行完了之后，浏览器将去异步队列中查询任务。

   如果有任务就放到主进程中开始执行。

   如果没有，就监听异步队列，当异步队列中有新的任务时，直接放到主进程中执行。

##### **5.异步类任务**

1. setTimeout  setInterval
2. DOM 事件，比如 addEventListener
3. ES6中的Promise

##### 6. 异步解决方案

1. jQuery Deferred
2. Promise
3. async / await
4. generator
